# Analisador de Protagonismo - Bradesco

Sistema para anÃ¡lise de protagonismo de marcas bancÃ¡rias em notÃ­cias usando IA (DeepSeek API).

## ğŸ“‹ Funcionalidades

- **Carregamento de Dados**: IntegraÃ§Ã£o com API para obter notÃ­cias
- **AnÃ¡lise de Protagonismo**: ClassificaÃ§Ã£o automÃ¡tica usando IA do DeepSeek
- **Processamento por Lote**: AnÃ¡lise de mÃºltiplas notÃ­cias e marcas
- **ExportaÃ§Ã£o**: GeraÃ§Ã£o de relatÃ³rios em Excel com timestamp
- **Docker**: ContainerizaÃ§Ã£o para facilitar deployment

## ğŸ—ï¸ Estrutura do Projeto

```
protagonismo-analyzer/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ api_loader.py          # Carregamento de dados da API
â”‚   â”œâ”€â”€ protagonismo_analyzer.py # AnÃ¡lise de protagonismo
â”‚   â”œâ”€â”€ config_manager.py       # Gerenciamento de configuraÃ§Ãµes
â”‚   â””â”€â”€ utils.py               # FunÃ§Ãµes utilitÃ¡rias
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ api_marca_configs.json # ConfiguraÃ§Ãµes da API
â”‚   â”œâ”€â”€ nivel_protagonismo_claude_bradesco.xlsx # NÃ­veis de protagonismo
â”‚   â””â”€â”€ api_keys.json          # Chaves de API (nÃ£o versionado)
â”œâ”€â”€ dados/
â”‚   â”œâ”€â”€ api/                   # Dados originais da API
â”‚   â””â”€â”€ marca_setor/          # Resultados processados
â”œâ”€â”€ main.py                    # Script principal
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ .env.example
â””â”€â”€ README.md
```

## ğŸš€ ConfiguraÃ§Ã£o e InstalaÃ§Ã£o

### PrÃ©-requisitos

- Python 3.9+
- Docker e Docker Compose (opcional)
- Chave da API do DeepSeek

### InstalaÃ§Ã£o Local

1. **Clone o repositÃ³rio**
```bash
git clone <url-do-repositorio>
cd protagonismo-analyzer
```

2. **Crie ambiente virtual**
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# ou
venv\Scripts\activate     # Windows
```

3. **Instale dependÃªncias**
```bash
pip install -r requirements.txt
```

4. **Configure variÃ¡veis de ambiente**
```bash
cp .env.example .env
# Edite o arquivo .env com sua chave da API
```

5. **Prepare arquivos de configuraÃ§Ã£o**
   - Coloque `api_marca_configs.json` na pasta `config/`
   - Coloque `nivel_protagonismo_claude_bradesco.xlsx` na pasta `config/`

### InstalaÃ§Ã£o com Docker

1. **Configure o ambiente**
```bash
cp .env.example .env
# Edite o .env com sua chave da API
```

2. **Prepare os arquivos de configuraÃ§Ã£o** (mesmo processo acima)

3. **Execute com Docker Compose**
```bash
docker-compose up --build
```

## âš™ï¸ ConfiguraÃ§Ã£o

### VariÃ¡veis de Ambiente

Crie um arquivo `.env` baseado no `.env.example`:

```bash
DEEPSEEK_API_KEY=sk-sua-chave-aqui
```

### Arquivos de ConfiguraÃ§Ã£o

1. **config/api_marca_configs.json**
```json
[
  {
    "url": "https://api.exemplo.com/endpoint",
    "data": {
      "param1": "valor1",
      "param2": "valor2"
    }
  }
]
```

2. **config/nivel_protagonismo_claude_bradesco.xlsx**
   - Arquivo Excel com colunas: `Nivel` e `Conceito`
   - NÃ­veis esperados: "Dedicada", "ConteÃºdo", "CitaÃ§Ã£o"

## ğŸ”§ Uso

### ExecuÃ§Ã£o Local
```bash
python main.py
```

### ExecuÃ§Ã£o com Docker
```bash
docker-compose up
```

O sistema irÃ¡:
1. Carregar dados da API
2. Processar anÃ¡lise de protagonismo para as marcas: Bradesco, ItaÃº, Santander
3. Gerar arquivo Excel com timestamp em `dados/marca_setor/`

## ğŸ“Š SaÃ­da

O sistema gera um arquivo Excel com o formato:
- **Nome**: `resultados_protagonismo_YYYYMMDD_HHMMSS.xlsx`
- **LocalizaÃ§Ã£o**: `dados/marca_setor/`
- **Colunas**: `Id`, `Marca`, `Nivel`

## ğŸ”’ SeguranÃ§a

- **API Keys**: Nunca versione chaves de API no cÃ³digo
- **VariÃ¡veis de Ambiente**: Use `.env` ou variÃ¡veis do sistema
- **Arquivo de ConfiguraÃ§Ã£o**: Alternativa segura em `config/api_keys.json`

## ğŸ“ Logs

- **Arquivo**: `app.log`
- **Console**: SaÃ­da simultÃ¢nea no terminal
- **NÃ­veis**: INFO, WARNING, ERROR

## ğŸ› Troubleshooting

### Problemas Comuns

1. **"Chave da API nÃ£o encontrada"**
   - Verifique se `DEEPSEEK_API_KEY` estÃ¡ configurada
   - Confirme se o arquivo `.env` estÃ¡ no diretÃ³rio raiz

2. **"Arquivo de configuraÃ§Ã£o nÃ£o encontrado"**
   - Verifique se os arquivos estÃ£o na pasta `config/`
   - Confirme os nomes dos arquivos

3. **Erro de conexÃ£o com API**
   - Verifique conectividade de rede
   - Confirme se a chave da API Ã© vÃ¡lida

## ğŸ”„ Desenvolvimento

### Estrutura de MÃ³dulos

- **main.py**: OrquestraÃ§Ã£o principal
- **api_loader.py**: IntegraÃ§Ã£o com APIs externas
- **protagonismo_analyzer.py**: LÃ³gica de anÃ¡lise com IA
- **config_manager.py**: Gerenciamento centralizado de configuraÃ§Ãµes
- **utils.py**: FunÃ§Ãµes auxiliares

### ContribuiÃ§Ã£o

1. Fork o projeto
2. Crie uma branch para sua feature
3. Commit suas mudanÃ§as
4. Push para a branch
5. Abra um Pull Request

## ğŸ“„ LicenÃ§a

Este projeto Ã© de uso interno da organizaÃ§Ã£o.

## ğŸ†˜ Suporte

Para dÃºvidas ou problemas, entre em contato com a equipe de desenvolvimento.